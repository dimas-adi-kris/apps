{% extends "public/templates/public_template.html" %}

{% block title %}Upload{% endblock %}

{% block main %}

<div class="container">
    <div class="row">
        <div class="col">

            <h1>Upload an image</h1>
            <hr>

            <form action="/upload-image" method="post" enctype="multipart/form-data">  
                <div class="form-group">
                    <label>Select image</label>
                    <div class="custom-file">
                        <input type="file" name="image" id="image" class="custom-file-input" accept="image/*" oninput="filesize(this);">
                        <label for="image" class="custom-file-label">Select image...</label>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">Detect</button>

                
            </form>

            {% if saved_image %}
            <img src="{{ url_for('static', filename='Deployment/Predicting/'+session.get('image_name')) }}" alt="{{session.get('image_name')}}" width="50%">
            <hr>
            <h4>Result</h4>
            <img src="{{ url_for('static', filename='Deployment/results/'+session.get('image_name')) }}" alt="{{session.get('image_name')}}" width="50%">
            <p>{{saved_image}}</p>
            {% endif %}
         
            {% if feedback %}
            <p class="text-danger float-right">{{feedback}}</p>
            {% endif %}
        </div>
    </div>
    
</div>

{% endblock %}

{% block script %}

<script>

    function filesize(elem){
      document.cookie = `filesize=${elem.files[0].size}`
    }
  
</script>

{% endblock %}